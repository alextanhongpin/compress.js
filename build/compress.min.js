var D=(A,d)=>()=>(A&&(d=A(A=0)),d);var P={};var y=D(()=>{/*! modernizr 3.6.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-exiforientation-setclasses !*/(function(A,d,u){function B(o,i){return typeof o===i}function e(){var o,i,h,r,p,f,Q;for(var R in t)if(t.hasOwnProperty(R)){if(o=[],i=t[R],i.name&&(o.push(i.name.toLowerCase()),i.options&&i.options.aliases&&i.options.aliases.length))for(h=0;h<i.options.aliases.length;h++)o.push(i.options.aliases[h].toLowerCase());for(r=B(i.fn,"function")?i.fn():i.fn,p=0;p<o.length;p++)f=o[p],Q=f.split("."),Q.length===1?n[Q[0]]=r:(!n[Q[0]]||n[Q[0]]instanceof Boolean||(n[Q[0]]=new Boolean(n[Q[0]])),n[Q[0]][Q[1]]=r),s.push((r?"":"no-")+Q.join("-"))}}function c(o){var i=g.className,h=n._config.classPrefix||"";if(w&&(i=i.baseVal),n._config.enableJSClass){var r=new RegExp("(^|\\s)"+h+"no-js(\\s|$)");i=i.replace(r,"$1"+h+"js$2")}n._config.enableClasses&&(i+=" "+h+o.join(" "+h),w?g.className.baseVal=i:g.className=i)}function a(o,i){if(typeof o=="object")for(var h in o)m(o,h)&&a(h,o[h]);else{o=o.toLowerCase();var r=o.split("."),p=n[r[0]];if(r.length==2&&(p=p[r[1]]),typeof p!="undefined")return n;i=typeof i=="function"?i():i,r.length==1?n[r[0]]=i:(!n[r[0]]||n[r[0]]instanceof Boolean||(n[r[0]]=new Boolean(n[r[0]])),n[r[0]][r[1]]=i),c([(i&&i!=0?"":"no-")+r.join("-")]),n._trigger(o,i)}return n}var s=[],t=[],E={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(o,i){var h=this;setTimeout(function(){i(h[o])},0)},addTest:function(o,i,h){t.push({name:o,fn:i,options:h})},addAsyncTest:function(o){t.push({name:null,fn:o})}},n=function(){};n.prototype=E,n=new n;var m,g=d.documentElement,w=g.nodeName.toLowerCase()==="svg";(function(){var o={}.hasOwnProperty;m=B(o,"undefined")||B(o.call,"undefined")?function(i,h){return h in i&&B(i.constructor.prototype[h],"undefined")}:function(i,h){return o.call(i,h)}})(),E._l={},E.on=function(o,i){this._l[o]||(this._l[o]=[]),this._l[o].push(i),n.hasOwnProperty(o)&&setTimeout(function(){n._trigger(o,n[o])},0)},E._trigger=function(o,i){if(this._l[o]){var h=this._l[o];setTimeout(function(){var r,p;for(r=0;r<h.length;r++)(p=h[r])(i)},0),delete this._l[o]}},n._q.push(function(){E.addTest=a}),n.addAsyncTest(function(){var o=new Image;o.onerror=function(){a("exiforientation",!1,{aliases:["exif-orientation"]})},o.onload=function(){a("exiforientation",o.width!==2,{aliases:["exif-orientation"]})},o.src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAASUkqAAgAAAABABIBAwABAAAABgASAAAAAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAABAAIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/iiiigD/2Q=="}),e(),c(s),delete E.addTest,delete E.addAsyncTest;for(var l=0;l<n._q.length;l++)n._q[l]();A.Modernizr=n})(window,document)});async function C(A,{quality:d=1}={}){if(Modernizr.exiforientation)return A;const u=await U(A);return new Promise((B)=>{const e=new Image;e.onload=async function(){const{naturalWidth:c,naturalHeight:a}=e,s=document.createElement("canvas"),t=s.getContext("2d");if(s.width=c,s.height=a,u>4)s.width=a,s.height=c;switch(u){case 2:t.translate(c,0),t.scale(-1,1);break;case 3:t.translate(c,a),t.rotate(Math.PI);break;case 4:t.translate(0,a),t.scale(1,-1);break;case 5:t.rotate(0.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(0.5*Math.PI),t.translate(0,-a);break;case 7:t.rotate(0.5*Math.PI),t.translate(c,-a),t.scale(-1,1);break;case 8:t.rotate(-0.5*Math.PI),t.translate(-c,0);break}if(u>4)t.drawImage(e,0,0,s.height,s.width);else t.drawImage(e,0,0,s.width,s.height);s.toBlob((E)=>{const n=new File([E],A.name,{type:A.type,lastModified:Date.now()});if(n.size>A.size)console.log("Compression failed",n.size,A.size),B(n);else B(n)},A.type,d)},e.src=URL.createObjectURL(A)})}var U=function(A){return new Promise((d)=>{const u=new FileReader;u.onload=function(B){var e=new DataView(B.target.result);if(e.getUint16(0,!1)!==65496)d(-2);const c=e.byteLength;let a=2;while(a<c){const s=e.getUint16(a,!1);if(a+=2,s===65505){if(e.getUint32(a+=2,!1)!==1165519206)d(-1);const t=e.getUint16(a+=6,!1)===18761;a+=e.getUint32(a+4,t);const E=e.getUint16(a,t);a+=2;for(let n=0;n<E;n++)if(e.getUint16(a+n*12,t)===274)d(e.getUint16(a+n*12+8,t))}else if((s&65280)!==65280)break;else a+=e.getUint16(a,!1)}d(-1)},u.readAsArrayBuffer(A.slice(0,65536))})};try{await Promise.resolve().then(() => (y(),P))}catch{globalThis.Modernizr={exiforientation:!0}}function I(A,{quality:d=0.95,aspectRatio:u="1:1"}={}){return new Promise((B)=>{const e=new Image;e.onload=async function(){const c={width:e.naturalWidth,height:e.naturalHeight},a=b(u),s=c.width/c.height,t={width:0,height:0,left:0,top:0};if(s>a)t.height=c.height,t.width=c.height*a;else t.width=c.width,t.height=c.width/a;if(c.width>t.width)t.left=(c.width-t.width)/2;else if(c.height-t.height)t.top=(c.height-t.height)/2;const E=document.createElement("canvas");E.width=t.width,E.height=t.height,E.getContext("2d").drawImage(e,t.left,t.top,e.width,e.height,0,0,e.width,e.height),E.toBlob((m)=>{B(new File([m],A.name,{type:A.type,lastModified:Date.now()}))},A.type,d)},e.src=URL.createObjectURL(A)})}var b=function(A){if(!A.includes(":"))throw new Error("invalid aspect ratio");const[d,u]=A.split(":").map(Number);if(!d||!u)throw new Error("invalid aspect ratio");return d/u};function _(A,{quality:d=0.95,maxWidth:u=null,maxHeight:B=null}={}){return new Promise((e,c)=>{const a=new Image;a.onload=async function(){const s={width:a.naturalWidth,height:a.naturalHeight},t={width:u||s.width,height:B||s.height},E=Math.min(1,t.width/s.width,t.height/s.height);t.width=s.width*E,t.height=s.height*E;const n=document.createElement("canvas");n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(a,0,0,t.width,t.height),n.toBlob((g)=>{const w=new File([g],A.name,{type:A.type,lastModified:Date.now()});e(w)},A.type,d)},a.src=URL.createObjectURL(A)})}class x{constructor({maxWidth:A,maxHeight:d,quality:u=0.95,crop:B=!1,aspectRatio:e="1:1"}={}){this.maxWidth=A,this.maxHeight=d,this.quality=u,this.crop=B,this.aspectRatio=e}async compress(A,d){const u={maxWidth:this.maxWidth,maxHeight:this.maxHeight,quality:this.quality,crop:this.crop,aspectRatio:this.aspectRatio,...d},B=[C];if(u.crop)B.push(I);B.push(_);for(let e of B)A=await e(A,u);return A}}export{x as default};
